# Dev Session Log - 2026-02-11

**Project:** FindYourDPC
**Session Focus:** Fix production deployment MIME type errors (blank white page)
**Duration:** ~4 hours across multiple attempts

---

## The Objective

Get the React app loading properly on Hostinger production deployment. Site was showing blank white page with console errors about MIME types.

---

## The Struggle

Multiple failed attempts over several sessions:

1. **First attempt (Feb 9):** Added MIME type middleware and static file serving with setHeaders
   - Result: Still broken
   - Problem: SPA catch-all was serving index.html for missing assets

2. **Second attempt (Feb 9):** Rewrote to CommonJS, reordered middleware
   - Result: Still broken
   - Problem: Build wasn't running — Hostinger Express preset doesn't build Vite apps

3. **Third attempt (Feb 11):** Added asset extension check to catch-all route
   - Code fix was correct: `if (req.path.match(/\.(js|css|png|...)/)) return 404`
   - But still broken because dist/ folder never got created

**Root cause discovered:** Hostinger "Express" framework preset only runs `npm install`, not `npm run build`. The Vite React app was never being built!

---

## The Breakthrough

Two fixes required:

1. **Code fix (server/index.js):** Prevent catch-all from serving index.html for missing static assets
   ```javascript
   app.get('*', (req, res) => {
       if (req.path.match(/\.(js|css|png|jpg|svg|ico|woff2?|ttf|eot|json|map)$/)) {
           return res.status(404).json({ error: 'Asset not found' });
       }
       // ... rest of catch-all
   });
   ```

2. **Deployment fix (Hostinger dashboard):** Change framework preset from "Express" to "Vite"
   - Express preset: Only installs deps, doesn't build
   - Vite preset: Runs `npm install && npm run build` automatically
   - This creates the `dist/` folder that the server serves

**Result:** Site now loads correctly, no MIME errors, React hydrates properly.

---

## Lessons Learned

1. **Always check build logs** — If only 6 lines (just npm install), build isn't running
2. **Match framework preset to actual framework** — "Express" for backend-only, "Vite" for Vite apps
3. **SPA catch-alls are greedy** — Must explicitly exclude asset extensions to prevent index.html being served for missing files
4. **MIME errors often mean 404s in disguise** — Server serving HTML for JS requests = wrong content-type

---

## Time Audit

- Initial debugging and fixes: ~2 hours (Feb 9)
- Re-attempts and diagnosis: ~1.5 hours (Feb 11)
- Final Hostinger config fix: ~30 minutes (Feb 11)
- **Total deep work:** ~4 hours across 3 days

---

*Generated using hindsight-primer skill principles*
